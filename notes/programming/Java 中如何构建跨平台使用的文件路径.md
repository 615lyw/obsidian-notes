# Java 中如何构建跨平台使用的文件路径

此处跨平台有两个含义：

- 同一套代码既能在 Windows 平台运行，也能在 macOS 和类 Unix 平台运行
- 同一套代码能在某一平台运行时能与另一平台进行交互，例如在 Windows 上运行代码，需要和类 Unix 端互相传输文件路径

面向文件路径字符串编程很麻烦，故需要通过类库提高编程效率（把字符转换和平台兼容交给类库去做）。

# 文件路径有关背景知识

[[文件分隔符与路径分隔符]]

[[Interface Path]]

# 最佳实践

如果代码既要在 Windows 上运行，也要在类 Unix 上运行，那么使用 Path 类来构建路径最方便。

如果代码要在 Windows 上运行，但要和类 Unix 之间传输文件路径（例如向 FTP 服务器传输待下载或待上传的文件路径）：

1. 字面量始终使用 `/` 作为文件分隔符，因为 Windows 两者都支持，而类 Unix 只支持这种分隔符
2. 所有的路径拼接均使用 Path 类来完成（利用 Path 类的路径拼接重要特性 [[Interface Path#^c5c4ca]]）
3. 如果在 Windows 上执行 `path.toString()` 得到 Windows 路径结果，这种结果不能传输给类 Unix 系统，故需要通过工具类把所得路径字符串中的文件分隔符转换一下（例如，Hutool 的 FileUtil）
