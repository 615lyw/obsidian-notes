---
date created: 2022-05-10, 16:39:59
date modified: 2022-07-22, 09:15:18
---

# Meta

- alias: 
- parent :: [[数据结构与算法]]
- siblings :: 
- child :: 
- refs: 
    - [二叉堆详解实现优先级队列 :: labuladong的算法小抄](https://labuladong.gitee.io/algo/2/23/65/)
    - [28 | 堆和堆排序：为什么说堆排序没有快速排序快？-极客时间](https://time.geekbang.org/column/article/69913)

---

# 堆定义

一种特殊的完全二叉树，每个节点大于等于（或小于等于）其左右子节点。

# 如何实现一个堆？

- 存储：数组存储完全二叉树
- 两个主要操作：插入和删除最值（即删除堆顶元素）
- 两个核心逻辑：下沉 sink 和上浮 rise 操作

# 堆插入实现逻辑

- 新元素插入在完全二叉树末尾
- 对新元素执行上浮操作恢复堆性质

# 堆删除最值实现逻辑

- 用完全二叉树最后一个元素替换堆顶元素
- 对堆顶元素执行下沉操作恢复堆性质

# 堆上浮操作逻辑

以大根堆为例：节点与其父节点比大小，若大于父节点则两者交换

# 堆下沉操作逻辑

以大根堆为例：

- 找出节点和左右子节点中三者中最大值（目的是为了把最大值放到父节点位置）
    - 若最大值是左或右子节点，交换值
    - 若最大值是自己，`break`
- 更新指针继续循环直到完全二叉树末尾

# 通过堆实现排序

整体来说：1 建堆 2 排序

## 为什么要先建堆？

建堆后可以保证堆顶元素为最值元素，利用不断删除堆顶元素操作可以依次获得最值元素，把最值元素排列好最终实现排序。

## 两种建堆方式：

- 利用堆的插入操作，从数组下标为 1 的元素开始，假设其为已插入元素处于完全二叉树末尾，对其执行上浮操作即可
- 从最后一个非叶子节点开始（最后一个元素的父节点），对其执行下沉操作，对前序的每个非叶子节点重复

## 如何实现排序？

取数组下标为 1 的元素（堆顶元素）与完全二叉树最后一个元素交换位置，即确定了一个最值元素应在位置。再取堆顶元素与倒数第二个元素交换位置，重复此过程，直到数组只剩一个元素。
