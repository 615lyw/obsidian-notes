---
date created: 2022-02-25, 21:30:36
date modified: 2022-06-11, 09:42:50
---

# Meta

- alias:
- parent :: [[MOC 锁]]
- siblings ::
- child :: [[并发读写时，读操作的可见性可通过 volatile 实现]]
- refs:
---

# 并发读写时，读操作也需要加锁

为了保证写操作对于读操作的可见性。

1. 写线程获取锁 -> 更新共享变量值 -> 写线程释放锁
2. 读线程获取锁 -> 读取共享变量值 -> 读线程释放锁
3. 根据 [[内存模型-JMM#Happens-Before 规则]] 中的程序顺序性规则和管程锁规则可知，写线程释放锁对于读线程获取锁是可见的，故写线程更新共享变量值对于读线程读取共享变量值是可见的

除了加锁这一实现方式，还可以通过 [[volatile]] 修饰变量，保证读操作的可见性，只需给写操作加锁。[[并发读写时，读操作的可见性可通过 volatile 实现]]
